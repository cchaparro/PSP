<!-- ###################################### -->
<template name="timeTemplate">
	<div class="time-content">
		{{> timesBar}}
		<table class="table time-table">
			<thead>
				<tr>
					<th>Etapa</th>
					<th>Estimado</th>
					<th class="hidden-xs">Tiempo registrado</th>
					<th>Completado</th>
					<th class="hidden-xs">Edici√≥n</th>
				</tr>
			</thead>
			<tbody>
				{{#each projectStages}}
					{{> timeTableRow}}
				{{/each}}
			</tbody>
		</table>
	</div>
</template>
<!-- ###################################### -->
<template name="timeTableRow">
	<tr>
		<td><span>{{name}}</span></td>
		<td class="hidden-xs">{{timeFormat estimated}}</td>
		<td class="hidden-xs">{{timeFormat time}}</td>
		<td>
			{{#if openStageStatus}}
				<div class="time-stage-status {{#if finished}} active {{/if}}"><i class="fa fa-fw fa-check"></i></div>
			{{else}}
				<div class="time-completed {{#unless finished}} hide {{/unless}}"><i class="fa fa-fw fa-check"></i></div>
			{{/if}}
		</td>
		<td class="hidden-xs">
			{{#if editAvailable}}
				<span class="edit-time">Editar</span>
			{{else}}
				<span> - </span>
			{{/if}}
		</td>
	</tr>
</template>

<!-- ###################################### -->
<template name="timesBar">
	{{#with planSummary}}
		<div class="time-menu">
			<div>
				<i class="fa time-btn fa-play {{#if isRecordingTime}} time-btn-play {{/if}}"></i>
				<i class="fa time-btn fa-pause {{#unless isRecordingTime}} {{#if disabledPlayButton}} time-btn-disabled {{else}} time-status-pause {{/if}} {{/unless}} "></i>
			</div>
			{{#if currentStage}}
				{{#if projectIsCompleted}}
					<div class="btn disabled-button">
						<span>Proyecto Finaliado</span>
					</div>
				{{else}}
					<div class="btn primary-button time-submit">
						<span>Finalizar {{currentStage}}</span>
					</div>
				{{/if}}
			{{else}}
				<div class="btn disabled-button">
					<span>Etapas Completadas</span>
				</div>
			{{/if}}
			<div class="open-stage-box pull-right {{#unless availableOpenStage}} popup-active {{/unless}}">
				<div class="btn pull-right {{#if availableOpenStage}} reopen-stage primary-button {{else}} disabled-button {{/if}}">
					{{#if openStageStatus}}
						<span>Finalizar Editar Etapas</span>
					{{else}}
						<span>Editar Estado Etapas</span>
					{{/if}}
				</div>
				<span class="reopen-stage-popup {{#if projectIsCompleted}} hide {{/if}}"><i></i>Debes ingresar un tiempo estimado en el Plan Summary para poder editar el estado de las etapas.</span>
			</div>
		</div>
	{{/with}}
</template>

<!-- ###################################### -->